# 分布式系统反向代理设计与实践-上


# 反向代理与正向代理分析 

## 正向代理作用

## 反向代理意义


# 反向代理在分布式架构中的作用

DR模式
封装MAC地址

CIP->VIP
VIP->DIP
LVS进行分发的时候写入DIP的MAC地址，目标IP是VIP,同时写入RIPMAC地址,
VIP根据RIPMAC地址找到Real Server

TUN模式
封装IP地址
CIP,VIP->DIP,CIP,RIP,VIP
隧道模式运维起来比较难


NAT模式
数据进出都需要经过LVS,节点过多时成为系统瓶颈

FULL-NAT模式

多做了几次地址的转换

## 反向代理中的调度算法

- 轮训
- 权重轮训
- 最小连接调度
- 权重最小连接调度
- 基于局部的最少链接
- 带复制的基于局部性最少链接
- 目标地址散列调度
- 源地址散列调度

轮训中为啥会有权重的判断
机器摘除时权重设为0

